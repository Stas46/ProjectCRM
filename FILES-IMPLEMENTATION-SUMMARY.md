# üéâ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ AI —á–∞—Ç–µ

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (Vision)
- **API**: Chat Completions —Å `image_url`
- **–§–æ—Ä–º–∞—Ç—ã**: PNG, JPG, WEBP, GIF
- **–ú–æ–¥–µ–ª–∏**: GPT-4o üé®, GPT-4o Mini üé®
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
  - OCR (—á—Ç–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)
  - –ê–Ω–∞–ª–∏–∑ –≥—Ä–∞—Ñ–∏–∫–æ–≤, –¥–∏–∞–≥—Ä–∞–º–º
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–∏–∑–∏—Ç–æ–∫, —Å—á–µ—Ç–æ–≤

### 2. –î–æ–∫—É–º–µ–Ω—Ç—ã (PDF, DOCX, TXT) - **–ù–û–í–û–ï!**
- **API**: OpenAI Responses API + Files API
- **–§–æ—Ä–º–∞—Ç—ã**: PDF, DOCX, TXT, MD, CSV, JSON
- **–ú–æ–¥–µ–ª–∏**: GPT-4o üé®, GPT-4o Mini üé®
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ß—Ç–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ PDF
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Word
  - –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –¥–æ–≥–æ–≤–æ—Ä–æ–≤
  - –ü–æ–∏—Å–∫ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤
  - –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª
    ‚Üì
–ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ URL –≤ –ë–î
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –¢–∏–ø —Ñ–∞–π–ª–∞?                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí Chat API      ‚îÇ
‚îÇ –î–æ–∫—É–º–µ–Ω—Ç ‚Üí Files + Response ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenAI
    ‚Üì
AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç
    ‚Üì
–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**Frontend** (`src/app/chat/page.tsx`):
- `handleFileSelect()` - –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤
- `sendMessage()` - –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase, –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ API
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–µ–≤—å—é —Ñ–∞–π–ª–æ–≤

**Backend** (`src/app/api/chat/route.ts`):
- `uploadFileToOpenAI()` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Files API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä API (Chat Completions vs Responses)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä API

```typescript
if (fileIds.length > 0) {
  // –ï—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí Responses API
  const response = await openai.responses.create({
    model: model,
    input: [{
      role: 'user',
      content: [
        { type: 'input_text', text: message },
        { type: 'input_file', file_id: fileId }
      ]
    }]
  });
} else {
  // –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/—Ç–µ–∫—Å—Ç ‚Üí Chat Completions
  const completion = await openai.chat.completions.create({
    model: model,
    messages: messages
  });
}
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–Ω–∞–ª–∏–∑ —Å—á–µ—Ç–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
```
–§–∞–π–ª: invoice.jpg
–ó–∞–ø—Ä–æ—Å: –ö–∞–∫–∞—è –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞?
AI: –ù–∞ —Å—á–µ—Ç–µ —É–∫–∞–∑–∞–Ω–∞ –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ 1,250.00 —Ä—É–±.
```

### –ê–Ω–∞–ª–∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞ (PDF)
```
–§–∞–π–ª: contract.pdf
–ó–∞–ø—Ä–æ—Å: –ü—Ä–æ–≤–µ—Ä—å –Ω–∞ —Ä–∏—Å–∫–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
AI: –ù–∞–π–¥–µ–Ω–æ 3 —Ä–∏—Å–∫–∞:
1. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—É–Ω–∫—Ç –æ —Å—Ä–æ–∫–∞—Ö —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏—è (—Ä–∞–∑–¥–µ–ª 5)
2. –®—Ç—Ä–∞—Ñ–Ω—ã–µ —Å–∞–Ω–∫—Ü–∏–∏ –±–µ–∑ –≤—Å—Ç—Ä–µ—á–Ω—ã—Ö –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ (–ø. 7.3)
3. –ù–µ—Ç –ø—É–Ω–∫—Ç–∞ –æ —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä–µ
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (DOCX)
```
–§–∞–π–ª: contacts.docx
–ó–∞–ø—Ä–æ—Å: –ò–∑–≤–ª–µ–∫–∏ –≤—Å–µ email
AI: support@company.com, sales@company.com, admin@company.com
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞

1. **–í—ã–ø–æ–ª–Ω–∏—Ç—å SQL**:
   - `create-storage-bucket.sql` - —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞
   - `chat-attachments-schema.sql` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   ```bash
   npm run dev
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**:
   - –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000/chat
   - –í—ã–±—Ä–∞—Ç—å GPT-4o üé®
   - –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç
   - –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### GPT-4o (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ü—Ä–æ–º–ø—Ç: $2.5 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- –û—Ç–≤–µ—Ç: $10 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- PDF 10 —Å—Ç—Ä–∞–Ω–∏—Ü ‚âà $0.02

### GPT-4o-mini (–¥–µ—à–µ–≤–ª–µ)
- –ü—Ä–æ–º–ø—Ç: $0.15 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- –û—Ç–≤–µ—Ç: $0.6 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- PDF 10 —Å—Ç—Ä–∞–Ω–∏—Ü ‚âà $0.001

## üöÄ Roadmap

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- Vision –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Files API –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- Responses API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä API
- UI –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–µ–≤—å—é –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ file_id –≤ –ë–î
- [ ] –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
- [ ] Drag & Drop
- [ ] –í—Å—Ç–∞–≤–∫–∞ –∏–∑ –±—É—Ñ–µ—Ä–∞ (Ctrl+V)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Excel (XLSX ‚Üí CSV)
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **VISION-SUPPORT.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Vision –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- **DOCUMENT-ANALYSIS.md** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **QUICK-START-VISION.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –ø—Ä–∏–º–µ—Ä—ã
- **FILE-ATTACHMENTS-SETUP.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–º**: —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π API
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ Storage, –∏–∑–æ–ª—è—Ü–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–µ

## üîç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –¢–∏–ø | –§–æ—Ä–º–∞—Ç | –°—Ç–∞—Ç—É—Å | API |
|-----|--------|--------|-----|
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | PNG, JPG, WEBP, GIF | ‚úÖ | Chat Completions |
| –î–æ–∫—É–º–µ–Ω—Ç—ã | PDF | ‚úÖ | Responses + Files |
| –î–æ–∫—É–º–µ–Ω—Ç—ã | DOCX | ‚úÖ | Responses + Files |
| –î–æ–∫—É–º–µ–Ω—Ç—ã | TXT, MD | ‚úÖ | Responses + Files |
| –î–∞–Ω–Ω—ã–µ | CSV, JSON | ‚úÖ | Responses + Files |
| –¢–∞–±–ª–∏—Ü—ã | XLSX | ‚ö†Ô∏è | –¢—Ä–µ–±—É–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ |

## üéä –ò—Ç–æ–≥–æ

–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OpenAI Vision + Responses API –¥–ª—è:
- –ê–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (OCR, –≥—Ä–∞—Ñ–∏–∫–∏, –≤–∏–∑–∏—Ç–∫–∏, —Å—á–µ—Ç–∞)
- –ß—Ç–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF, DOCX, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –æ—Ç—á—ë—Ç—ã)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–∫–æ–Ω—Ç–∞–∫—Ç—ã, —Å—É–º–º—ã, –¥–∞—Ç—ã)
- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (—Ä–∏—Å–∫–∏, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è)

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π UI —á–∞—Ç–∞!** üöÄ
