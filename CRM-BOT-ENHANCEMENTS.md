# –£–ª—É—á—à–µ–Ω–∏—è CRM –ë–æ—Ç–∞ - –ü–æ–ª–Ω–∞—è –í–∏–¥–∏–º–æ—Å—Ç—å –ü—Ä–æ–µ–∫—Ç–∞

## –û–±–∑–æ—Ä

–†–∞—Å—à–∏—Ä–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ CRM Data Agent –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–≤.

## –ù–æ–≤—ã–µ –§—É–Ω–∫—Ü–∏–∏

### 1. `getFullProjectInfo(userId, projectId)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å –í–°–Æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–ª–∏–µ–Ω—Ç, —Å—Ç–∞—Ç—É—Å, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –¥–µ–¥–ª–∞–π–Ω, –±—é–¥–∂–µ—Ç, –∑–∞–º–µ—Ç–∫–∏)
- –í—Å–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –í—Å–µ —Å—á–µ—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –±—é–¥–∂–µ—Ç—É (–ø–æ—Ç—Ä–∞—á–µ–Ω–æ/–æ—Å—Ç–∞—Ç–æ–∫)
- –°–∞–º–º–∞—Ä–∏ –ø–æ –∑–∞–¥–∞—á–∞–º (–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ, —Å–µ–≥–æ–¥–Ω—è, —Å–∫–æ—Ä–æ)
- –°–∞–º–º–∞—Ä–∏ –ø–æ —Å—á–µ—Ç–∞–º (–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ/–Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```typescript
const { data, error } = await getFullProjectInfo(userId, projectId);

console.log(data.project);         // –û–±—ä–µ–∫—Ç –ø—Ä–æ–µ–∫—Ç–∞
console.log(data.tasks);           // –ú–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á
console.log(data.invoices);        // –ú–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤
console.log(data.budget_stats);    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—é–¥–∂–µ—Ç–∞
console.log(data.task_summary);    // –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–∞–º–º–∞—Ä–∏ –∑–∞–¥–∞—á
console.log(data.invoice_summary); // –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–∞–º–º–∞—Ä–∏ —Å—á–µ—Ç–æ–≤
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –±–æ—Ç–∞**:
- "–ø–æ–∫–∞–∂–∏ –≤—Å—ë –æ –ø—Ä–æ–µ–∫—Ç–µ –®–∫–æ–ª–∞"
- "–ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –Æ–∂–Ω–æ–º—É —à–æ—Å—Å–µ"
- "—á—Ç–æ —Ç–∞–º —Å –¢–°–ñ?"
- "–¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ —à–∫–æ–ª–∞"

---

### 2. `searchAllData(userId, searchQuery, filters?)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º CRM (–ø—Ä–æ–µ–∫—Ç—ã, –∑–∞–¥–∞—á–∏, —Å—á–µ—Ç–∞)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `searchQuery` - —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞
- `filters.type` - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö: `'projects' | 'tasks' | 'invoices' | 'all'`

**–ü–æ–∏—Å–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è**:
- –í –ø—Ä–æ–µ–∫—Ç–∞—Ö: –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞–º–µ—Ç–∫–∞–º
- –í –∑–∞–¥–∞—á–∞—Ö: –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é
- –í —Å—á–µ—Ç–∞—Ö: –ø–æ –Ω–æ–º–µ—Ä—É, –ø–æ—Å—Ç–∞–≤—â–∏–∫—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, items (—Ç–æ–≤–∞—Ä—ã)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
```typescript
{
  projects: Project[];      // –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
  tasks: Task[];           // –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
  invoices: Invoice[];     // –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞
  summary: string;         // –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–∞–º–º–∞—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```typescript
const { data, error } = await searchAllData(userId, "–ø—Ä–æ—Ñ–∏–ª—å", { type: 'all' });

console.log(data.summary); 
// üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê: "–ø—Ä–æ—Ñ–∏–ª—å"
// üìä –ù–∞–π–¥–µ–Ω–æ:
// - –ü—Ä–æ–µ–∫—Ç–æ–≤: 2
// - –ó–∞–¥–∞—á: 5
// - –°—á–µ—Ç–æ–≤: 12
// 
// üèóÔ∏è –ü–†–û–ï–ö–¢–´:
// 1. –®–∫–æ–ª–∞ ‚Ññ5 (in_progress)
// ...
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –±–æ—Ç–∞**:
- "–Ω–∞–π–¥–∏ –≤—Å–µ –ø—Ä–æ –ø—Ä–æ—Ñ–∏–ª—å"
- "–∏—â–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ü—Ä–æ–≤–µ–¥–∞–ª"
- "–ø–æ–∏—Å–∫ –∫—Ä—ã—à–∫–∏"
- "–≥–¥–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è —Å—Ç–µ–∫–ª–æ"

---

### 3. `getInvoicesAnalytics(filters?)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Å—á–µ—Ç–∞–º —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**:
- `project_id` - —Å—á–µ—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- `category` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø—Ä–æ—Ñ–∏–ª—å, —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞, —Å—Ç–µ–∫–ª–æ –∏ —Ç.–¥.)
- `supplier_name` - —Å—á–µ—Ç–∞ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- `date_from` / `date_to` - –ø–µ—Ä–∏–æ–¥
- `paid_status` - —Ç–æ–ª—å–∫–æ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ/–Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
```typescript
{
  total_amount: number;      // –û–±—â–∞—è —Å—É–º–º–∞ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
  paid_amount: number;       // –°—É–º–º–∞ –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö
  unpaid_amount: number;     // –°—É–º–º–∞ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö
  
  by_category: Array<{       // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    category: string;
    total: number;
    count: number;
  }>;
  
  by_supplier: Array<{       // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
    supplier: string;
    total: number;
    count: number;
  }>;
  
  by_month: Array<{          // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º
    month: string;           // "2025-11"
    total: number;
    count: number;
  }>;
  
  top_suppliers: Array<{     // –¢–æ–ø-5 –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
    supplier: string;
    total: number;
  }>;
  
  summary: string;           // –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–∞–º–º–∞—Ä–∏
}
```

**–ü—Ä–∏–º–µ—Ä summary**:
```
üí∞ –ê–ù–ê–õ–ò–¢–ò–ö–ê –ü–û –°–ß–ï–¢–ê–ú

üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –í—Å–µ–≥–æ —Å—á–µ—Ç–æ–≤: 47
- –û–±—â–∞—è —Å—É–º–º–∞: 2,450,000 ‚ÇΩ
- –û–ø–ª–∞—á–µ–Ω–æ: 1,800,000 ‚ÇΩ
- –ù–µ –æ–ø–ª–∞—á–µ–Ω–æ: 650,000 ‚ÇΩ

üì¶ –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- –ü—Ä–æ—Ñ–∏–ª—å –∞–ª—é–º–∏–Ω–∏–µ–≤—ã–π: 850,000 ‚ÇΩ (12 —à—Ç)
- –°—Ç–µ–∫–ª–æ: 640,000 ‚ÇΩ (8 —à—Ç)
- –§—É—Ä–Ω–∏—Ç—É—Ä–∞: 320,000 ‚ÇΩ (15 —à—Ç)

üè™ –¢–æ–ø-5 –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:
1. –ü—Ä–æ–≤–µ–¥–∞–ª: 920,000 ‚ÇΩ
2. –ê–ª—é–°—Ç—Ä–æ–π: 680,000 ‚ÇΩ
3. –°—Ç–µ–∫–ª–æ–ì—Ä—É–ø–ø: 450,000 ‚ÇΩ
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –±–æ—Ç–∞**:
- "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—á–µ—Ç–∞–º –∑–∞ –º–µ—Å—è—Ü"
- "–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤"
- "—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –≤—Å–µ–≥–æ"
- "—Ç–æ–ø –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤"
- "—Ä–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"

---

## –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã –ë–æ—Ç–∞

### –ù–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ Data Agent:

#### 1. `get_full_project`
```json
{
  "action": "get_full_project",
  "filters": {
    "project_name": "—à–∫–æ–ª–∞"
  },
  "reasoning": "–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ"
}
```

**–¢—Ä–∏–≥–≥–µ—Ä—ã**:
- "–≤—Å–µ –æ –ø—Ä–æ–µ–∫—Ç–µ X"
- "–ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ X"
- "—á—Ç–æ –ø–æ –ø—Ä–æ–µ–∫—Ç—É X"
- "–¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ X"

#### 2. `search_data`
```json
{
  "action": "search_data",
  "data": {
    "query": "–ø—Ä–æ—Ñ–∏–ª—å"
  },
  "reasoning": "–ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º"
}
```

**–¢—Ä–∏–≥–≥–µ—Ä—ã**:
- "–Ω–∞–π–¥–∏ X"
- "–∏—â–∏ X"
- "–ø–æ–∏—Å–∫ X"
- "–≥–¥–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è X"

#### 3. `get_analytics`
```json
{
  "action": "get_analytics",
  "filters": {
    "date_range": "–º–µ—Å—è—Ü",
    "category": "–ø—Ä–æ—Ñ–∏–ª—å"
  },
  "reasoning": "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Å—á–µ—Ç–∞–º"
}
```

**–¢—Ä–∏–≥–≥–µ—Ä—ã**:
- "–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Å—á–µ—Ç–∞–º"
- "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤"
- "—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏"
- "—Ç–æ–ø –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤"
- "—Ä–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"

---

## –ü—Ä–∏–º–µ—Ä—ã –î–∏–∞–ª–æ–≥–æ–≤

### –î–∏–∞–ª–æ–≥ 1: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: —á—Ç–æ –ø–æ –ø—Ä–æ–µ–∫—Ç—É —à–∫–æ–ª–∞?

ü§ñ –ë–æ—Ç:
üèóÔ∏è –ü–û–õ–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–†–û–ï–ö–¢–ï

üìã –ù–∞–∑–≤–∞–Ω–∏–µ: –®–∫–æ–ª–∞ ‚Ññ5
üè¢ –ö–ª–∏–µ–Ω—Ç: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è —à–∫–æ–ª—ã
üìä –°—Ç–∞—Ç—É—Å: in_progress
üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ –í—ã—Å–æ–∫–∏–π
üìÖ –°—Ä–æ–∫: 15.12.2025

üí∞ –ë–Æ–î–ñ–ï–¢:
–ë—é–¥–∂–µ—Ç: 3,500,000 ‚ÇΩ
–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 2,150,000 ‚ÇΩ
–û—Å—Ç–∞—Ç–æ–∫: 1,350,000 ‚ÇΩ

üìù –ó–ê–ú–ï–¢–ö–ò:
–¶–≤–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è: RAL 9016 –±–µ–ª—ã–π
–°—Ç–µ–∫–ª–æ–ø–∞–∫–µ—Ç: 4–ú1-16-4–ú1
–§—É—Ä–Ω–∏—Ç—É—Ä–∞: Roto NT

üìä –°–ê–ú–ú–ê–†–ò –ü–û –ó–ê–î–ê–ß–ê–ú
–í—Å–µ–≥–æ –∑–∞–¥–∞—á: 8
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 3
üîÑ –í —Ä–∞–±–æ—Ç–µ: 2
‚è≥ –û–∂–∏–¥–∞–µ—Ç: 3

üî• –°–†–û–ö –°–ï–ì–û–î–ù–Ø: 1 –∑–∞–¥–∞—á
   - –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å–º–µ—Ç—É

üí∞ –°–ß–ï–¢–ê:
–í—Å–µ–≥–æ: 12 —à—Ç. –Ω–∞ 2,150,000 ‚ÇΩ
‚úÖ –û–ø–ª–∞—á–µ–Ω–æ: 9 —à—Ç. (1,800,000 ‚ÇΩ)
‚ùå –ù–µ –æ–ø–ª–∞—á–µ–Ω–æ: 3 —à—Ç. (350,000 ‚ÇΩ)

üì¶ –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú:
–ü—Ä–æ—Ñ–∏–ª—å: 5 —à—Ç. –Ω–∞ 850,000 ‚ÇΩ
–°—Ç–µ–∫–ª–æ: 3 —à—Ç. –Ω–∞ 640,000 ‚ÇΩ
–§—É—Ä–Ω–∏—Ç—É—Ä–∞: 4 —à—Ç. –Ω–∞ 660,000 ‚ÇΩ
```

### –î–∏–∞–ª–æ–≥ 2: –ü–æ–∏—Å–∫
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –Ω–∞–π–¥–∏ –≤—Å—ë –æ –ø—Ä–æ—Ñ–∏–ª–µ

ü§ñ –ë–æ—Ç:
üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê: "–ø—Ä–æ—Ñ–∏–ª—å"

üìä –ù–∞–π–¥–µ–Ω–æ:
- –ü—Ä–æ–µ–∫—Ç–æ–≤: 3
- –ó–∞–¥–∞—á: 5
- –°—á–µ—Ç–æ–≤: 18

üèóÔ∏è –ü–†–û–ï–ö–¢–´:
1. –®–∫–æ–ª–∞ ‚Ññ5 (in_progress)
2. –Æ–∂–Ω–æ–µ —à–æ—Å—Å–µ 12 (planning)
3. –û–∫–Ω–æ –¢–°–ñ (completed)

‚úÖ –ó–ê–î–ê–ß–ò:
1. –ö—É–ø–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å RAL 9016 (in_progress)
2. –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Ü–≤–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è (todo)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞ —Å–∫–ª–∞–¥–µ (done)

üí∞ –°–ß–ï–¢–ê:
1. –°—á–µ—Ç ‚Ññ 5146 - –ü—Ä–æ–≤–µ–¥–∞–ª (125,000 ‚ÇΩ)
2. –°—á–µ—Ç ‚Ññ 277 - –ê–ª—é–°—Ç—Ä–æ–π (98,500 ‚ÇΩ)
3. –°—á–µ—Ç ‚Ññ 1010 - –ü—Ä–æ–≤–µ–¥–∞–ª (142,000 ‚ÇΩ)
```

### –î–∏–∞–ª–æ–≥ 3: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—á–µ—Ç–∞–º –∑–∞ –º–µ—Å—è—Ü

ü§ñ –ë–æ—Ç:
üí∞ –ê–ù–ê–õ–ò–¢–ò–ö–ê –ü–û –°–ß–ï–¢–ê–ú

üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –í—Å–µ–≥–æ —Å—á–µ—Ç–æ–≤: 28
- –û–±—â–∞—è —Å—É–º–º–∞: 1,850,000 ‚ÇΩ
- –û–ø–ª–∞—á–µ–Ω–æ: 1,320,000 ‚ÇΩ
- –ù–µ –æ–ø–ª–∞—á–µ–Ω–æ: 530,000 ‚ÇΩ

üì¶ –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- –ü—Ä–æ—Ñ–∏–ª—å –∞–ª—é–º–∏–Ω–∏–µ–≤—ã–π: 650,000 ‚ÇΩ (8 —à—Ç)
- –°—Ç–µ–∫–ª–æ: 540,000 ‚ÇΩ (6 —à—Ç)
- –§—É—Ä–Ω–∏—Ç—É—Ä–∞: 380,000 ‚ÇΩ (10 —à—Ç)
- –ö—Ä–µ–ø—ë–∂: 180,000 ‚ÇΩ (4 —à—Ç)

üè™ –¢–æ–ø-5 –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤:
1. –ü—Ä–æ–≤–µ–¥–∞–ª: 720,000 ‚ÇΩ
2. –ê–ª—é–°—Ç—Ä–æ–π: 490,000 ‚ÇΩ
3. –°—Ç–µ–∫–ª–æ–ì—Ä—É–ø–ø: 380,000 ‚ÇΩ
4. –ú–µ—Ç–∏–∑–°–µ—Ä–≤–∏—Å: 160,000 ‚ÇΩ
5. –†–æ—Ç–æ –¶–µ–Ω—Ç—Ä: 100,000 ‚ÇΩ
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
1. **`src/lib/crm-data-tools.ts`** - –¥–æ–±–∞–≤–ª–µ–Ω—ã 3 –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
   - `getFullProjectInfo`
   - `searchAllData`
   - `getInvoicesAnalytics`

2. **`src/lib/data-agent.ts`** - –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:
   - –ò–º–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - –î–æ–±–∞–≤–ª–µ–Ω—ã action handlers: `get_full_project`, `search_data`, `get_analytics`
   - –†–∞—Å—à–∏—Ä–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DataAgentRequest`
   - –û–±–Ω–æ–≤–ª—ë–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- `getFullProjectInfo` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `Promise.all`
- `searchAllData` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–∏–ø
- `getInvoicesAnalytics` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Supabase Service Role Client
- Row Level Security (RLS) –æ–±—Ö–æ–¥–∏—Ç—Å—è –¥–ª—è —á—Ç–µ–Ω–∏—è —á–µ—Ä–µ–∑ service role
- –í–∞–ª–∏–¥–∞—Ü–∏—è userId –Ω–∞ —É—Ä–æ–≤–Ω–µ API endpoints

---

## –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–∑ –ö–æ–¥–∞

### –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ:
```typescript
import { getFullProjectInfo } from '@/lib/crm-data-tools';

const { data, error } = await getFullProjectInfo(userId, projectId);

if (data) {
  console.log('–ü—Ä–æ–µ–∫—Ç:', data.project.project_name);
  console.log('–ó–∞–¥–∞—á:', data.tasks.length);
  console.log('–°—á–µ—Ç–æ–≤:', data.invoices.length);
  console.log('–ë—é–¥–∂–µ—Ç:', data.budget_stats);
  console.log('\n' + data.task_summary);
  console.log('\n' + data.invoice_summary);
}
```

### –ü–æ–∏—Å–∫:
```typescript
import { searchAllData } from '@/lib/crm-data-tools';

const { data, error } = await searchAllData(userId, "–ø—Ä–æ—Ñ–∏–ª—å", { type: 'all' });

if (data) {
  console.log(data.summary);
  console.log('–ü—Ä–æ–µ–∫—Ç—ã:', data.projects.map(p => p.project_name));
  console.log('–°—á–µ—Ç–∞:', data.invoices.map(i => i.invoice_number));
}
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
```typescript
import { getInvoicesAnalytics } from '@/lib/crm-data-tools';

const { data, error } = await getInvoicesAnalytics({
  date_from: '2025-11-01',
  date_to: '2025-11-30'
});

if (data) {
  console.log(data.summary);
  console.log('–í—Å–µ–≥–æ:', data.total_amount);
  console.log('–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:', data.by_category);
  console.log('–¢–æ–ø –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏:', data.top_suppliers);
}
```

---

## –ß—Ç–æ –î–∞–ª—å—à–µ?

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞** - –¥–æ–±–∞–≤–∏—Ç—å —á—Ç–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Å–º–µ—Ç—ã, –¥–æ–≥–æ–≤–æ—Ä—ã, —Ñ–æ—Ç–æ)
2. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –º–µ–Ω—è–ª –ø—Ä–æ–µ–∫—Ç
3. **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ—Ü–µ–Ω–∫–∞ —Å—Ä–æ–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
4. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - –≤—ã–≥—Ä—É–∑–∫–∞ –≤ PDF/Excel
5. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤, –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–¥–∞—á

### –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:
‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `crm-data-tools.ts`
‚úÖ Data Agent –æ–±–Ω–æ–≤–ª—ë–Ω —Å –Ω–æ–≤—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω –ø—Ä–∏–º–µ—Ä–∞–º–∏
‚úÖ TypeScript —Ç–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ –∏–ª–∏ —á–∞—Ç –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
