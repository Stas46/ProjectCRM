#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–¢–µ—Å—Ç regex –¥–ª—è –Ω–æ–º–µ—Ä–∞ —Å—á–µ—Ç–∞ –û–û–û –ü–†–ê–ö–¢–ò–ö
"""

import re

def test_invoice_number_regex():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º regex –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–º–µ—Ä–∞ —Å—á–µ—Ç–∞ –£–¢-784"""
    
    text = """
–û–±—Ä–∞–∑–µ—Ü –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø–æ—Ä—É—á–µ–Ω–∏—è
–§–ò–õ–ò–ê–õ "–°–ê–ù–ö–¢-–ü–ï–¢–ï–†–ë–£–†–ì–°–ö–ò–ô" –ê–û "–ê–õ–¨–§–ê-–ë–ê–ù–ö" –≥. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –ë–ò–ö 044030786
–°—á. ‚Ññ 30101810600000000786
–ë–∞–Ω–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
–ò–ù–ù 7804702556 –ö–ü–ü 780401001.0 –°—á. ‚Ññ 40702810432650000500
–û–û–û "–ü–†–ê–ö–¢–ò–ö" –í–∏–¥ –æ–ø. 01 –°—Ä–æ–∫ –ø–ª–∞—Ç.
–ù–∞–∑. –ø–ª. –û—á–µ—Ä. –ø–ª–∞—Ç. 5.0
–ö–æ–¥ –ó–ö25090–ü–£–¢0007840007 –†–µ–∑. –ø–æ–ª–µ
–ü–æ–ª—É—á–∞—Ç–µ–ª—å
–û–ø–ª–∞—Ç–∞ –ø–æ –∑–∞–∫–∞–∑—É –∫–ª–∏–µ–Ω—Ç–∞ ‚Ññ–£–¢-784
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
–°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É ‚Ññ –£–¢-784 –æ—Ç 16 —Å–µ–Ω—Ç—è–±—Ä—è 2025 –≥.
    """
    
    print("üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º regex –¥–ª—è –Ω–æ–º–µ—Ä–∞ —Å—á–µ—Ç–∞...")
    print("üìù –¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:")
    print("   - '–û–ø–ª–∞—Ç–∞ –ø–æ –∑–∞–∫–∞–∑—É –∫–ª–∏–µ–Ω—Ç–∞ ‚Ññ–£–¢-784'")
    print("   - '–°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É ‚Ññ –£–¢-784 –æ—Ç 16 —Å–µ–Ω—Ç—è–±—Ä—è 2025 –≥.'")
    print()
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 1: (?:–°–ß–ï–¢|–°—á–µ—Ç)\s*(?:–Ω–∞ –æ–ø–ª–∞—Ç—É\s*)?‚Ññ\s*([–ê-–Ø\d\-]+)
    pattern1 = r'(?:–°–ß–ï–¢|–°—á–µ—Ç)\s*(?:–Ω–∞ –æ–ø–ª–∞—Ç—É\s*)?‚Ññ\s*([–ê-–Ø\d\-]+)'
    match1 = re.search(pattern1, text, re.IGNORECASE)
    
    print(f"üîç –ü–∞—Ç—Ç–µ—Ä–Ω 1: {pattern1}")
    if match1:
        print(f"   ‚úÖ –ù–∞–π–¥–µ–Ω: {match1.group(1)}")
        print(f"   üìç –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: '{match1.group(0)}'")
    else:
        print("   ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω")
    print()
    
    # –ü–∞—Ç—Ç–µ—Ä–Ω 2: ‚Ññ\s*([–ê-–Ø\d\-]+)\s*–æ—Ç
    pattern2 = r'‚Ññ\s*([–ê-–Ø\d\-]+)\s*–æ—Ç'
    match2 = re.search(pattern2, text, re.IGNORECASE)
    
    print(f"üîç –ü–∞—Ç—Ç–µ—Ä–Ω 2: {pattern2}")
    if match2:
        print(f"   ‚úÖ –ù–∞–π–¥–µ–Ω: {match2.group(1)}")
        print(f"   üìç –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: '{match2.group(0)}'")
    else:
        print("   ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω")
    print()
    
    # –ü—Ä–æ–≤–µ—Ä–∏–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã ‚Ññ
    all_numbers = re.findall(r'‚Ññ\s*([–ê-–Ø\d\-]+)', text, re.IGNORECASE)
    print(f"üîç –í—Å–µ –Ω–æ–º–µ—Ä–∞ –ø–æ—Å–ª–µ '‚Ññ': {all_numbers}")
    
    # –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫ –≤ –∫–æ–¥–µ
    final_match = re.search(pattern1, text, re.IGNORECASE) or re.search(pattern2, text, re.IGNORECASE)
    print(f"\nüéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∫–∞–∫ –≤ –∫–æ–¥–µ):")
    if final_match:
        print(f"   ‚úÖ –ù–∞–π–¥–µ–Ω –Ω–æ–º–µ—Ä: {final_match.group(1)}")
    else:
        print("   ‚ùå –ù–æ–º–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω")

if __name__ == "__main__":
    test_invoice_number_regex()