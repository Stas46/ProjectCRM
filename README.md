# CRM –¥–ª—è –æ—Å—Ç–µ–∫–ª–µ–Ω–∏—è# üöÄ CRM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –æ—Å—Ç–µ–∫–ª–µ–Ω–∏—è



–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –ø—Ä–æ–µ–∫—Ç–∞–º–∏, —Å—á–µ—Ç–∞–º–∏ –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º —Å—á–µ—Ç–æ–≤.## üìñ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç



## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏–î–ª—è –Ω–æ–≤–æ–≥–æ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ - –Ω–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å!



- üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º (PDF, Excel, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)### üìö –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ:

- üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏

- üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏1. **`DATABASE_SCHEMA.md`** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (**–°–ê–ú–û–ï –í–ê–ñ–ù–û–ï!** ‚≠ê‚≠ê‚≠ê)

- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏2. **`PROJECT_OVERVIEW.md`** - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞3. **`PROJECT_STRUCTURE.md`** - –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

4. **`AUDIT_REPORT.md`** - –æ—Ç—á–µ—Ç –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∞—É–¥–∏—Ç–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

---

- **Frontend**: Next.js 15, React, TypeScript, Tailwind CSS

- **Backend**: Next.js API Routes## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

- **Database**: Supabase (PostgreSQL)

- **Storage**: Supabase Storage```bash

- **OCR**: Google Vision API, Yandex Vision API# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

npm install

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—ènpm run dev

```

```bash

git clone https://github.com/Stas46/ProjectCRM.git–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000) –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

cd ProjectCRM/glazing-crm

```---



### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!



```bash### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:

npm install- ‚úÖ **–í–°–ï–ì–î–ê** —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å `DATABASE_SCHEMA.md`

```- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `name` (–Ω–µ `title`) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `client_id` (UUID, –Ω–µ string)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `start_date` –∏ `end_date` (–Ω–µ `due_date`)



–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env.local` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:---



```bash## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

cp .env.example .env.local

``````

glazing-crm/

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:‚îú‚îÄ‚îÄ DATABASE_SCHEMA.md       # üìñ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

- `NEXT_PUBLIC_SUPABASE_URL` - URL –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞‚îú‚îÄ‚îÄ PROJECT_OVERVIEW.md      # üìñ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

- `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Anon key –∏–∑ Supabase‚îú‚îÄ‚îÄ src/

- `SUPABASE_SERVICE_ROLE_KEY` - Service role key –∏–∑ Supabase‚îÇ   ‚îú‚îÄ‚îÄ app/                 # Next.js —Å—Ç—Ä–∞–Ω–∏—Ü—ã

- `YANDEX_VISION_API_KEY` - API –∫–ª—é—á Yandex Cloud Vision‚îÇ   ‚îú‚îÄ‚îÄ components/          # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `YANDEX_CLOUD_FOLDER_ID` - Folder ID –∏–∑ Yandex Cloud‚îÇ   ‚îî‚îÄ‚îÄ lib/                 # –£—Ç–∏–ª–∏—Ç—ã

- `GOOGLE_APPLICATION_CREDENTIALS` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É Google Cloud credentials‚îú‚îÄ‚îÄ public/                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

‚îî‚îÄ‚îÄ python-scripts/          # Python —Å–∫—Ä–∏–ø—Ç—ã OCR

### 4. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏```



```bash---

npm run dev

```## üéØ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª



–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:30001. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

2. **–£—á–µ—Ç —Å—á–µ—Ç–æ–≤ —Å OCR** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

### 5. –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏** - —Ñ–∏–∑–ª–∏—Ü–∞ –∏ —é—Ä–ª–∏—Ü–∞

4. **–†–∞–±–æ—Ç–∞ —Å –±—Ä–∏–≥–∞–¥–∞–º–∏** - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ–Ω

```bash5. **–ó–∞–¥–∞—á–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

npm run build

npm start---

```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash

- Node.js 18+NEXT_PUBLIC_SUPABASE_URL=https://fpnugtlchxigwpqwiczc.supabase.co

- PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–ºNEXT_PUBLIC_SUPABASE_ANON_KEY=<your_key>

- Nginx –¥–ª—è reverse proxySUPABASE_SERVICE_ROLE_KEY=<your_key>

- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)```



### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä---



```bash## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

cd /var/www/alu.stella-spb.ru- [Next.js Documentation](https://nextjs.org/docs)

git clone https://github.com/Stas46/ProjectCRM.git .- [Supabase Documentation](https://supabase.com/docs)

- [Tailwind CSS](https://tailwindcss.com/docs)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

npm install---



# –°–æ–∑–¥–∞–Ω–∏–µ .env.local## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

cp .env.example .env.local

nano .env.local  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ### –û—à–∏–±–∫–∞ "Could not find column"

‚Üí –°–≤–µ—Ä—å—Ç–µ—Å—å —Å `DATABASE_SCHEMA.md`

# –°–±–æ—Ä–∫–∞

npm run build### –û—à–∏–±–∫–∞ "permission denied"

‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2

pm2 start npm --name "crm-glazing" -- start### OCR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

pm2 save‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –≤ `.env.local`

pm2 startup

```---



### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 8 –Ω–æ—è–±—Ä—è 2025 –≥.


```nginx
server {
    listen 80;
    server_name alu.stella-spb.ru;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    server_name alu.stella-spb.ru;

    ssl_certificate /etc/letsencrypt/live/alu.stella-spb.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/alu.stella-spb.ru/privkey.pem;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
glazing-crm/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/              # Next.js App Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/          # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients/      # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ invoices/     # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects/     # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ suppliers/    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tasks/        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á
‚îÇ   ‚îî‚îÄ‚îÄ lib/              # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã
‚îú‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ python-scripts/       # Python —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è OCR
‚îî‚îÄ‚îÄ ultimate_invoice_parser.py  # –ü–∞—Ä—Å–µ—Ä —Å—á–µ—Ç–æ–≤
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary
