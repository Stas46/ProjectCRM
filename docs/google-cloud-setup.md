# Настройка Google Cloud Vision API

Это руководство поможет вам настроить Google Cloud Vision API для вашего проекта CRM Glazing.

## Шаг 1: Создание проекта в Google Cloud Platform

1. Перейдите на [console.cloud.google.com](https://console.cloud.google.com/)
2. Войдите в свой аккаунт Google или создайте новый
3. Нажмите на выпадающее меню проектов вверху страницы и выберите "Новый проект"
4. Введите название проекта (например, "Glazing CRM") и нажмите "Создать"
5. Дождитесь создания проекта (это может занять несколько минут)
6. После создания проекта откройте его

## Шаг 2: Активация Cloud Vision API

1. В боковом меню выберите "APIs & Services" > "Library"
2. В поисковой строке введите "Cloud Vision API"
3. Выберите "Cloud Vision API" из результатов поиска
4. Нажмите кнопку "Включить" (Enable)

## Шаг 3: Создание сервисного аккаунта и ключа

1. В боковом меню выберите "APIs & Services" > "Credentials"
2. Нажмите "Create Credentials" и выберите "Service account"
3. Введите название сервисного аккаунта (например, "glazing-crm-vision")
4. Опционально: добавьте описание
5. Нажмите "Done"
6. Найдите созданный сервисный аккаунт в списке и нажмите на его имя
7. Перейдите на вкладку "Keys"
8. Нажмите "Add Key" и выберите "Create new key"
9. Выберите формат JSON и нажмите "Create"
10. Файл с ключом будет автоматически загружен на ваш компьютер

## Шаг 4: Настройка проекта CRM Glazing

1. Переименуйте загруженный файл ключа в `google-credentials.json`
2. Поместите файл в корневую директорию проекта CRM Glazing
3. Убедитесь, что в файле `.env.local` есть следующие строки:
   ```
   GOOGLE_APPLICATION_CREDENTIALS="./google-credentials.json"
   NEXT_PUBLIC_USE_REAL_INVOICE_RECOGNITION="true"
   ```
4. Перезапустите сервер разработки, если он был запущен

## Шаг 5: Проверка работоспособности

1. Запустите приложение с помощью команды `npm run dev`
2. Перейдите на страницу распознавания счетов
3. Загрузите изображение счета
4. Нажмите кнопку "Распознать счет"
5. Если все настроено правильно, вы увидите результаты распознавания

## Примечания

- **Биллинг**: Для полноценной работы API может потребоваться активация биллинга в Google Cloud Platform. Первые 1000 запросов в месяц бесплатны.
- **Безопасность**: Никогда не публикуйте файл `google-credentials.json` в публичных репозиториях.
- **Отладка**: Если возникают проблемы, проверьте консоль на наличие ошибок, связанных с аутентификацией Google Cloud.

## Полезные ссылки

- [Документация Google Cloud Vision API](https://cloud.google.com/vision/docs)
- [Настройка аутентификации для клиентских библиотек](https://cloud.google.com/docs/authentication/getting-started)
- [Цены на Google Cloud Vision API](https://cloud.google.com/vision/pricing)