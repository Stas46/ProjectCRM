# üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–æ: ${new Date().toLocaleString('ru-RU')}

## üìÅ –ö–æ—Ä–Ω–µ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### `/src` - –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
src/
‚îú‚îÄ‚îÄ app/              # Next.js App Router (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ API)
‚îú‚îÄ‚îÄ components/       # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ lib/              # –£—Ç–∏–ª–∏—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îú‚îÄ‚îÄ services/         # –°–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç—ã —Å API/–ë–î
‚îî‚îÄ‚îÄ types/            # TypeScript —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
```

---

## üåê –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`/src/app`)

### –ë–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- `/projects` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
  - `/new` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ‚úÖ
  - `/[id]` - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–µ–∫—Ç–∞
  - `page.tsx` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

- `/invoices` - –°—á–µ—Ç–∞ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ
  - `/recognition` - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤ OCR ‚≠ê
  - `/[id]` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—á–µ—Ç–∞
  - `page.tsx` - –°–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤

- `/suppliers` - –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
- `/employees` - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏  
- `/tasks` - –ó–∞–¥–∞—á–∏
- `/chats` - –ß–∞—Ç—ã –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
- `/calendar` - –ö–∞–ª–µ–Ω–¥–∞—Ä—å

### OCR –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ù–ï –£–î–ê–õ–Ø–¢–¨!)
- `/test-center` - **–¶–µ–Ω—Ç—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è OCR** ‚≠ê
- `/test-vision-api` - **–¢–µ—Å—Ç Google Vision API** ‚≠ê
- `/test-invoice-recognition` - **–¢–µ—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—á–µ—Ç–æ–≤** ‚≠ê
- `/parser-test` - **–¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞ —Å—á–µ—Ç–æ–≤** ‚≠ê
- `/ocr` - OCR –∏–∑ PDF
- `/pdf-analyze` - –ê–Ω–∞–ª–∏–∑ PDF
- `/pdf-info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PDF
- `/pdf-text-image` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `/pdf-tools` - –£—Ç–∏–ª–∏—Ç—ã PDF
- `/alternative-convert`, `/convert`, `/simple-convert` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `test-*` –∏ `pdf-*` –Ω—É–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—á–µ—Ç–æ–≤!

---

## üîå API Endpoints (`/src/app/api`)

### –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- `/api/projects` - CRUD –ø—Ä–æ–µ–∫—Ç–æ–≤
- `/api/invoices` - CRUD —Å—á–µ—Ç–æ–≤
- `/api/suppliers` - CRUD –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- `/api/files` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

### OCR —Å–∏—Å—Ç–µ–º–∞ ‚≠ê
- `/api/smart-invoice` - **–£–º–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤** (–æ—Å–Ω–æ–≤–Ω–æ–π endpoint)
- `/api/invoice-ocr` - OCR —Å—á–µ—Ç–æ–≤
- `/api/recognize-invoice` - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å—á–µ—Ç–∞
- `/api/pdf-ocr` - OCR –∏–∑ PDF
- `/api/pdf-convert` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF
- `/api/pdf-to-image` - PDF –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `/api/pdf-to-png` - PDF –≤ PNG
- `/api/pdf-info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PDF
- `/api/pdf-text` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- `/api/pdf-text-image` - –¢–µ–∫—Å—Ç –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `/api/test-vision-api` - –¢–µ—Å—Ç Google Vision
- `/api/test-parser` - –¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞

### –û–±—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `/api/save-training-data` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- `/api/save-parser-rules` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø–∞—Ä—Å–µ—Ä–∞
- `/api/retrain-model` - –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`/src/components`)

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Radix UI + Tailwind)
- `/ui` - –ë–∞–∑–æ–≤—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã (button, input, card, dialog –∏ —Ç.–¥.)

### –ë–∏–∑–Ω–µ—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `invoice-recognition.tsx` - **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—á–µ—Ç–æ–≤** ‚≠ê
- `google-cloud-api-tester.tsx` - –¢–µ—Å—Ç–µ—Ä Google Cloud API
- `project-*.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤
- `invoice-*.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å—á–µ—Ç–æ–≤
- `task-*.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∑–∞–¥–∞—á

---

## üìä –°–µ—Ä–≤–∏—Å—ã (`/src/services`)

–°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase PostgreSQL:

- `projects.ts` - –ü—Ä–æ–µ–∫—Ç—ã (getAllProjects, getProjectById, createProject, updateProject, deleteProject)
- `invoices.ts` - –°—á–µ—Ç–∞ (getAllInvoices, getInvoicesByProjectId, createInvoice, updateInvoice)
- `clients.ts` - –ö–ª–∏–µ–Ω—Ç—ã
- `suppliers.ts` - –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
- `tasks.ts` - –ó–∞–¥–∞—á–∏
- `employees.ts` - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
- `task-attachments.ts` - –í–ª–æ–∂–µ–Ω–∏—è –∫ –∑–∞–¥–∞—á–∞–º

**–í–∞–∂–Ω–æ**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–ª—è –∏–∑ `DATABASE_SCHEMA.md`

---

## üìù –¢–∏–ø—ã (`/src/types`)

TypeScript —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ë–î:

- `project.ts` - –¢–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ (Project, NewProject, UpdateProject, ProjectStatus)
- `invoice.ts` - –¢–∏–ø—ã —Å—á–µ—Ç–æ–≤ (Invoice, NewInvoice, InvoicePaymentStatus, InvoiceOcrStatus) ‚úÖ **–û–ë–ù–û–í–õ–ï–ù**
- `client.ts` - –¢–∏–ø—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ (Client, ClientType = 'individual' | 'legal_entity') ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù**
- `supplier.ts` - –¢–∏–ø—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- `task.ts` - –¢–∏–ø—ã –∑–∞–¥–∞—á
- `employee.ts` - –¢–∏–ø—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `shift.ts` - –¢–∏–ø—ã —Å–º–µ–Ω
- `message.ts` - –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üêç Python —Å–∫—Ä–∏–ø—Ç—ã (`/python-scripts`)

- `ultimate_invoice_parser.py` - **–û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä —Å—á–µ—Ç–æ–≤** ‚≠ê
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞, –¥–∞—Ç—É, –ò–ù–ù, –ö–ü–ü, —Å—É–º–º—ã
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
  - –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
  - –û–±—É—á–∞–µ–º—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚≠ê
- `README.md` - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `DATABASE_SCHEMA.md` - **–ì–õ–ê–í–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´** - –ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î ‚≠ê‚≠ê‚≠ê
- `PROJECT_OVERVIEW.md` - –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `AUDIT_REPORT.md` - –û—Ç—á–µ—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–º –∞—É–¥–∏—Ç–µ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `/docs/google-cloud-setup.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud Vision API
- `/docs/invoice-recognition.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OCR —Å–∏—Å—Ç–µ–º—ã
- `/database-schema/*` - –°—Ç–∞—Ä–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ SQL —Å–∫—Ä–∏–ø—Ç—ã

---

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- `package.json` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
- `tsconfig.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
- `next.config.ts` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
- `eslint.config.mjs` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ESLint
- `postcss.config.mjs` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostCSS
- `.env.local` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
- `.env.example` - –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `google-credentials.json` - –ö–ª—é—á–∏ Google Cloud (–Ω–µ –≤ git)

---

## üî• –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ (–ù–ï –£–î–ê–õ–Ø–¢–¨!)
1. `DATABASE_SCHEMA.md` - **–°—Ö–µ–º–∞ –ë–î**
2. `ultimate_invoice_parser.py` - **–ü–∞—Ä—Å–µ—Ä —Å—á–µ—Ç–æ–≤**
3. `src/types/*.ts` - **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**
4. `src/services/*.ts` - **–†–∞–±–æ—Ç–∞ —Å –ë–î**
5. `src/app/api/smart-invoice/route.ts` - **–ì–ª–∞–≤–Ω—ã–π API OCR**

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ù–£–ñ–ù–´ –¥–ª—è OCR)
- `src/app/test-center`
- `src/app/test-vision-api`
- `src/app/parser-test`
- –í—Å–µ `pdf-*` —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## ‚ö†Ô∏è –ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ (28 —Ñ–∞–π–ª–æ–≤)

–£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- `setup-test-project.js`
- `verify-database.js`
- `recreate-*.js`
- `test-*.js` (–∫–æ—Ä–Ω–µ–≤—ã–µ, –Ω–µ –≤ /src/app)
- `*.sql` (–∫–æ—Ä–Ω–µ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
- –°—Ç–∞—Ä—ã–µ –æ—Ç—á–µ—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞**: –í—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –≤ `DATABASE_SCHEMA.md`

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–µ–∫—Ç–æ–º

### 1. –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚úÖ **–í—Å–µ–≥–¥–∞** –ø—Ä–æ–≤–µ—Ä—è–π `DATABASE_SCHEMA.md` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ñ–æ—Ä–º
‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π** –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π:
   - `projects.name` (–ù–ï title)
   - `projects.client_id` (–ù–ï client)
   - `projects.end_date` (–ù–ï due_date)
   - `invoices.supplier_name` (–ù–ï supplier)
   - `clients.type = 'legal_entity'` (–ù–ï 'company')

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π** —Ç–∏–ø—ã –∏–∑ `/src/types`
‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π** —Å–µ—Ä–≤–∏—Å—ã –∏–∑ `/src/services`
‚úÖ **–ù–ï –¥—É–±–ª–∏—Ä—É–π** —Ç–∏–ø—ã - –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å

### 3. –†–∞–±–æ—Ç–∞ —Å OCR
‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π** `/test-center` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚úÖ **API** `/api/smart-invoice` - –≥–ª–∞–≤–Ω—ã–π endpoint
‚úÖ **Python** —Å–∫—Ä–∏–ø—Ç `ultimate_invoice_parser.py` - –ø–∞—Ä—Å–µ—Ä

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–°—Ç—Ä–∞–Ω–∏—Ü**: ~30
- **API endpoints**: ~20
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: ~50+
- **–¢–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö**: 9 –æ—Å–Ω–æ–≤–Ω—ã—Ö
- **–¢–∞–±–ª–∏—Ü –ë–î**: 15+
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~15000+

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç, —É–¥–∞–ª–µ–Ω–æ 28 —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã TypeScript –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é –ë–î.
