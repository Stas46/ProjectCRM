# üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã

```
invoice-system-clean/
‚îÇ
‚îú‚îÄ‚îÄ üìñ README.md                    # –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ ‚ö° QUICKSTART.md               # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
‚îú‚îÄ‚îÄ üöÄ DEPLOYMENT.md               # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ ‚ùå FILES_TO_DELETE.md          # –ß—Ç–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ database/                       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql                 # ‚úÖ –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ (suppliers, invoices, views)
‚îÇ   ‚îî‚îÄ‚îÄ reset.sql                  # –°–±—Ä–æ—Å –ë–î (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å)
‚îÇ
‚îú‚îÄ‚îÄ types/                          # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ supplier.ts                # ‚úÖ Supplier, CreateSupplier, SupplierCategory
‚îÇ   ‚îî‚îÄ‚îÄ invoice.ts                 # ‚úÖ Invoice, CreateInvoice, ParsedInvoiceData
‚îÇ
‚îî‚îÄ‚îÄ api/                            # API endpoints
    ‚îî‚îÄ‚îÄ smart-invoice.ts           # ‚úÖ POST /api/smart-invoice (OCR + –ø–∞—Ä—Å–∏–Ω–≥)
```

---

## üéØ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (2 —Ç–∞–±–ª–∏—Ü—ã + 2 view)

1. **suppliers** - –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
   - `id`, `name`, `inn`, `phone`, `email`, `legal_address`, `category`
   
2. **invoices** - –°—á–µ—Ç–∞
   - `id`, `invoice_number`, `invoice_date`, `total_amount`, `vat_amount`, `supplier_id`, `file_url`

3. **invoices_with_suppliers** (view) - –°—á–µ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

4. **supplier_totals** (view) - –°—É–º–º—ã –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º

### TypeScript —Ç–∏–ø—ã

- –°—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ö–µ–º–µ –ë–î
- Interface –¥–ª—è —á—Ç–µ–Ω–∏—è (`Invoice`, `Supplier`)
- Interface –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è (`CreateInvoice`, `CreateSupplier`)
- –¢–∏–ø—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π (`SupplierCategory`)
- –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (`ParsedInvoiceData`)

### API Endpoint

**POST /api/smart-invoice**

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç:
- `file` (PDF/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

–ü—Ä–æ—Ü–µ—Å—Å:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –≤ Supabase Storage
2. OCR —á–µ—Ä–µ–∑ Google Cloud Vision
3. –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Python —Å–∫—Ä–∏–ø—Ç
4. –°–æ–∑–¥–∞–µ—Ç/–Ω–∞—Ö–æ–¥–∏—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—á–µ—Ç –≤ –ë–î

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "success": true,
  "invoice": { ... },
  "parsed": { ... }
}
```

---

## üìä –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è

### –¢–∞–±–ª–∏—Ü–∞ `invoices`
‚úÖ invoice_number (text)
‚úÖ invoice_date (date)  
‚úÖ total_amount (decimal)
‚úÖ vat_amount (decimal, nullable)
‚úÖ supplier_id (UUID FK)
‚úÖ file_url (text)
‚úÖ created_at (timestamp)

**–£–¥–∞–ª–µ–Ω–æ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏:**
‚ùå contract_number
‚ùå payment_date
‚ùå supplier_name (–±–µ—Ä–µ—Ç—Å—è –∏–∑ suppliers)
‚ùå supplier_inn (–±–µ—Ä–µ—Ç—Å—è –∏–∑ suppliers)
‚ùå ocr_raw_text
‚ùå payment_status
‚ùå ocr_status
‚ùå project_id

### –¢–∞–±–ª–∏—Ü–∞ `suppliers`
‚úÖ name (text)
‚úÖ inn (text)
‚úÖ phone (text)
‚úÖ email (text)
‚úÖ legal_address (text)
‚úÖ category (text)
‚úÖ created_at (timestamp)

**–£–¥–∞–ª–µ–Ω–æ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏:**
‚ùå kpp
‚ùå actual_address
‚ùå warehouse_address
‚ùå full_name
‚ùå phone_additional
‚ùå website
‚ùå rating
‚ùå is_active

---

## üîß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Node.js –ø–∞–∫–µ—Ç—ã
```json
{
  "@google-cloud/vision": "^4.0.0",
  "@supabase/supabase-js": "^2.0.0"
}
```

### Python –ø–∞–∫–µ—Ç—ã
```
google-cloud-vision
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä—ã–π (5 –º–∏–Ω—É—Ç)
–°–ª–µ–¥—É–π—Ç–µ `QUICKSTART.md`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–¥—Ä–æ–±–Ω—ã–π (15 –º–∏–Ω—É—Ç)
–°–ª–µ–¥—É–π—Ç–µ `DEPLOYMENT.md`

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Å—á–µ—Ç–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Supabase
3. üì± –°–æ–∑–¥–∞–π—Ç–µ UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—á–µ—Ç–æ–≤
4. üìä –°–æ–∑–¥–∞–π—Ç–µ UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
5. üîç –î–æ–±–∞–≤—å—Ç–µ –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
6. üì• –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel

---

## üé® –ò–¥–µ–∏ –¥–ª—è UI

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—á–µ—Ç–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä—ã: –ø–æ –¥–∞—Ç–µ, –ø–æ—Å—Ç–∞–≤—â–∏–∫—É, —Å—É–º–º–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞ (modal)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Å—É–º–º–∞–º–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ò—Å—Ç–æ—Ä–∏—è —Å—á–µ—Ç–æ–≤ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

### –î–∞—à–±–æ—Ä–¥
- –û–±—â–∞—è —Å—É–º–º–∞ —Å—á–µ—Ç–æ–≤
- –¢–æ–ø –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –ì—Ä–∞—Ñ–∏–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–≠—Ç–æ **–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞**. –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å:

- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã (—Å–≤—è–∑–∞—Ç—å —Å—á–µ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏)
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã –æ–ø–ª–∞—Ç—ã
- –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ù–æ **—Å–Ω–∞—á–∞–ª–∞** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–∞–∑–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—á–µ—Ç–æ–≤!
