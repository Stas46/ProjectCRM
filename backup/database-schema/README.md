# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ–π —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö CRM —Å–∏—Å—Ç–µ–º—ã.

## ‚ö†Ô∏è –í–ê–ñ–ù–û!

**–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –£–î–ê–õ–Ø–¢ –í–°–ï —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ!** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è:
- –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å—Ö–µ–º—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
database-schema/
‚îú‚îÄ‚îÄ README.md                      # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îú‚îÄ‚îÄ RESET-AND-CREATE-ALL.sql       # –ì–ª–∞–≤–Ω—ã–π SQL —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ complete-schema-part1.sql      # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
‚îú‚îÄ‚îÄ complete-schema-part2.sql      # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã + —Ç—Ä–∏–≥–≥–µ—Ä—ã
‚îî‚îÄ‚îÄ 00-OVERVIEW.md                 # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ö–µ–º—ã
```

## üóÑÔ∏è –¢–∞–±–ª–∏—Ü—ã (15 —à—Ç—É–∫)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (—á–∞—Å—Ç—å 1):
1. **clients** - –ö–ª–∏–µ–Ω—Ç—ã (—Ñ–∏–∑. –ª–∏—Ü–∞ –∏ –∫–æ–º–ø–∞–Ω–∏–∏)
2. **employees** - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –ø–æ–ª–Ω–æ–π HR –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. **projects** - –ü—Ä–æ–µ–∫—Ç—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–ª–∏–µ–Ω—Ç–∞–º
4. **suppliers** - –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏
5. **invoices** - –°—á–µ—Ç–∞ —Å OCR –∏ –æ–ø–ª–∞—Ç–æ–π
6. **tasks** - –ó–∞–¥–∞—á–∏ —Å –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (—á–∞—Å—Ç—å 2):
7. **task_comments** - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞—á–∞–º
8. **task_attachments** - –í–ª–æ–∂–µ–Ω–∏—è –∫ –∑–∞–¥–∞—á–∞–º
9. **crews** - –ë—Ä–∏–≥–∞–¥—ã
10. **crew_members** - –°–æ—Å—Ç–∞–≤ –±—Ä–∏–≥–∞–¥
11. **shifts** - –°–º–µ–Ω—ã
12. **shift_assignees** - –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–º–µ–Ω—ã
13. **project_messages** - –°–æ–æ–±—â–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö (—á–∞—Ç)
14. **message_attachments** - –í–ª–æ–∂–µ–Ω–∏—è –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º
15. **custom_expense_categories** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞—Ç—Ä–∞—Ç

## üîß –°–ø–æ—Å–æ–±—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `complete-schema-part1.sql`
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ (Run)
6. –°–æ–∑–¥–∞–π—Ç–µ –µ—â–µ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `complete-schema-part2.sql`
8. –í—ã–ø–æ–ª–Ω–∏—Ç–µ (Run)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Node.js —Å–∫—Ä–∏–ø—Ç

```bash
# –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
node reset-database.js
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏—é.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ psql (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

```bash
# –ï—Å–ª–∏ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ PostgreSQL
psql "postgresql://postgres:[YOUR-PASSWORD]@[YOUR-PROJECT-ID].supabase.co:5432/postgres" \
  -f database-schema/complete-schema-part1.sql \
  -f database-schema/complete-schema-part2.sql
```

## üìä –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Å—Ö–µ–º—É

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ (—Ñ–∏–∑. –ª–∏—Ü–∞ + –∫–æ–º–ø–∞–Ω–∏–∏)
- HR-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ü—Ä–æ–µ–∫—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Ç—Ä–µ–∫–∏–Ω–≥–æ–º
- –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –°—á–µ—Ç–∞ —Å OCR-—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º (Google Vision API)
- –ó–∞–¥–∞—á–∏ —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏, –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –ë—Ä–∏–≥–∞–¥—ã –∏ —Å–º–µ–Ω—ã –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç
- –ß–∞—Ç –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞—Ç—Ä–∞—Ç

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- –†–∞—Å—á–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞—Ç—Ä–∞—Ç –ø—Ä–æ–µ–∫—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
- –ü–æ–¥—Å—á–µ—Ç –ø–æ–¥–∑–∞–¥–∞—á, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –≤–ª–æ–∂–µ–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ —á–ª–µ–Ω–æ–≤ –±—Ä–∏–≥–∞–¥ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ —Å–º–µ–Ω—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Å—á–µ—Ç–æ–≤ –∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º –ø–æ –ò–ù–ù
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã —Å—á–µ—Ç–æ–≤

### ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- –í—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
- –ü–æ–ª—è –¥–ª—è –ø–æ–∏—Å–∫–∞ (–∏–º–µ–Ω–∞, email, —Ç–µ–ª–µ—Ñ–æ–Ω—ã)
- –î–∞—Ç—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Full-text search –∏–Ω–¥–µ–∫—Å—ã (GIN) –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- JSONB –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≥–∏–±–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üîë –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **clients** - —Ä–∞–Ω—å—à–µ –∫–ª–∏–µ–Ω—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –≤ projects

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö:

#### projects:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `client_id` (—Å—Å—ã–ª–∫–∞ –Ω–∞ clients)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `manager_id` (–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `contract_number`, `contract_date`, `warranty_period`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `area_sqm`, `floor_count`, `window_count` (–º–µ—Ç—Ä–∏–∫–∏)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `actual_end_date`, `actual_cost` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

#### suppliers:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `contact_person`, `contact_person_position`, `contact_person_phone`, `contact_person_email`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `bank_name`, `bank_bik`, `bank_account`, `bank_correspondent_account`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `payment_terms`, `delivery_terms`, `min_order_amount`, `discount_percent`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `total_orders`, `total_amount`, `last_order_date` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `documents` JSONB, `tags` array, `priority`

#### invoices:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: OCR –ø–æ–ª—è (`ocr_status`, `ocr_confidence`, `ocr_raw_text`, `ocr_data`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `supplier_id` (—Å—Å—ã–ª–∫–∞ –Ω–∞ suppliers)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `payment_status`, `paid_amount`, `payment_date`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `items` JSONB (–ø–æ–∑–∏—Ü–∏–∏ —Å—á–µ—Ç–∞)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `responsible_person_id`, `approved_by_id`, `approved_at`

#### tasks:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `checklist` JSONB (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `parent_task_id` (–¥–ª—è –ø–æ–¥–∑–∞–¥–∞—á)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `depends_on_task_ids`, `blocks_task_ids` (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `progress_percent` (–ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `coordinates` JSONB (GPS –ª–æ–∫–∞—Ü–∏—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `estimated_hours`, `actual_hours`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `subtasks_count`, `subtasks_completed_count` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `comments_count`, `attachments_count` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

#### employees:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `hire_date`, `dismissal_date`, `employment_status`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `salary`, `salary_type`, `bank_account`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `passport_series`, `passport_number`, `inn`, `snils`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `manager_id` (–∏–µ—Ä–∞—Ä—Ö–∏—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `education`, `specialization`, `certifications`, `skills`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `work_schedule` JSONB, `emergency_contacts` JSONB

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–í–ù–ò–ú–ê–ù–ò–ï:** –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ RESET —Å–∫—Ä–∏–ø—Ç–æ–≤!

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:

1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
```sql
-- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV —á–µ—Ä–µ–∑ Supabase Dashboard
-- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ pg_dump
```

2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é —Å—Ö–µ–º—ã

3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ö–µ–º—É

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã
SELECT trigger_name, event_object_table 
FROM information_schema.triggers 
WHERE trigger_schema = 'public'
ORDER BY event_object_table, trigger_name;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
SELECT tablename, indexname 
FROM pg_indexes 
WHERE schemaname = 'public'
ORDER BY tablename, indexname;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
SELECT
    tc.table_name, 
    kcu.column_name, 
    ccu.table_name AS foreign_table_name,
    ccu.column_name AS foreign_column_name 
FROM information_schema.table_constraints AS tc 
JOIN information_schema.key_column_usage AS kcu
  ON tc.constraint_name = kcu.constraint_name
  AND tc.table_schema = kcu.table_schema
JOIN information_schema.constraint_column_usage AS ccu
  ON ccu.constraint_name = tc.constraint_name
  AND ccu.table_schema = tc.table_schema
WHERE tc.constraint_type = 'FOREIGN KEY' AND tc.table_schema='public'
ORDER BY tc.table_name;
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:

1. **–û–±–Ω–æ–≤–∏—Ç–µ TypeScript —Ç–∏–ø—ã** –≤ `src/types/`
   - –î–æ–±–∞–≤—å—Ç–µ `src/types/client.ts`
   - –û–±–Ω–æ–≤–∏—Ç–µ `src/types/project.ts` (–¥–æ–±–∞–≤—å—Ç–µ `client_id`)
   - –û–±–Ω–æ–≤–∏—Ç–µ `src/types/supplier.ts` (–¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è)
   - –û–±–Ω–æ–≤–∏—Ç–µ `src/types/invoice.ts` (OCR –ø–æ–ª—è)
   - –û–±–Ω–æ–≤–∏—Ç–µ `src/types/task.ts` (checklist, dependencies)
   - –û–±–Ω–æ–≤–∏—Ç–µ `src/types/employee.ts` (HR –ø–æ–ª—è)

2. **–û–±–Ω–æ–≤–∏—Ç–µ API —Ä–æ—É—Ç—ã** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π

3. **–û–±–Ω–æ–≤–∏—Ç–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –ø–æ–¥ –Ω–æ–≤—ã–µ –ø–æ–ª—è

4. **–î–æ–±–∞–≤—å—Ç–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "relation already exists"
```sql
-- –í—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
DROP TABLE IF EXISTS 
  message_attachments, project_messages, shift_assignees, shifts,
  crew_members, crews, task_attachments, task_comments,
  custom_expense_categories, tasks, invoices, suppliers,
  projects, employees, clients
CASCADE;
```

### –û—à–∏–±–∫–∞: "permission denied"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ:
- Service Role Key (–Ω–µ Anon Key)
- –ò–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ —á–µ—Ä–µ–∑ Supabase Dashboard
- –ò–ª–∏ –≤–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û—à–∏–±–∫–∞: "function uuid_generate_v4 does not exist"
```sql
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```

## üìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ Supabase (Dashboard ‚Üí Logs)
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –í–µ—Ä—Å–∏—é PostgreSQL (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 14+)

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] –°–¥–µ–ª–∞–Ω –±—ç–∫–∞–ø —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã (part1 + part2)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ç—Ä–∏–≥–≥–µ—Ä—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã TypeScript —Ç–∏–ø—ã
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã API —Ä–æ—É—Ç—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (CRUD)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025
**–í–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã:** 2.0
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Supabase (PostgreSQL 14+)
