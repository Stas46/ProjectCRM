-- ========================================
-- ПОЛНОЕ ПЕРЕСОЗДАНИЕ БАЗЫ ДАННЫХ
-- ВНИМАНИЕ: Этот скрипт УДАЛИТ ВСЕ данные!
-- ========================================

-- Шаг 0: Полный сброс (если нужно)
-- Раскомментируйте следующие строки для полной очистки:
-- DROP SCHEMA public CASCADE;
-- CREATE SCHEMA public;

-- Включаем расширения
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- ========================================
-- ЧАСТЬ 1: ОСНОВНЫЕ ТАБЛИЦЫ
-- ========================================
-- Клиенты, Сотрудники, Проекты, Поставщики, Счета, Задачи
\i complete-schema-part1.sql

-- ========================================
-- ЧАСТЬ 2: ДОПОЛНИТЕЛЬНЫЕ ТАБЛИЦЫ И ТРИГГЕРЫ
-- ========================================
-- Комментарии, Вложения, Бригады, Смены, Чаты + все триггеры
\i complete-schema-part2.sql

-- ========================================
-- ЗАПОЛНЕНИЕ ТЕСТОВЫМИ ДАННЫМИ (ОПЦИОНАЛЬНО)
-- ========================================

-- Раскомментируйте если нужны тестовые данные:
-- \i test-data.sql

-- ========================================
-- ГОТОВО!
-- ========================================

SELECT 
  schemaname,
  tablename,
  pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY tablename;
