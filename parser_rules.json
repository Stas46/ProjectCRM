{
  "invoice_number_patterns": [
    {
      "pattern": "№\\s*([А-ЯЁA-Z]+-\\d+)",
      "priority": 1,
      "description": "Буквенно-цифровые номера (УТ-784, А-123)",
      "active": true
    },
    {
      "pattern": "СЧЁТ.*?№\\s*([А-ЯA-Z]+-\\d+)",
      "priority": 1,
      "description": "СЧЁТ с буквенно-цифровым номером",
      "active": true
    },
    {
      "pattern": "СЧЕТ.*?№\\s*([А-ЯA-Z]+-\\d+)",
      "priority": 1,
      "description": "СЧЕТ с буквенно-цифровым номером",
      "active": true
    },
    {
      "pattern": "СЧЁТ[-\\s]*ДОГОВОР.*?№\\s*(\\d+)",
      "priority": 2,
      "description": "СЧЁТ-ДОГОВОР с номером",
      "active": true
    },
    {
      "pattern": "СЧЕТ[-\\s]*ДОГОВОР.*?№\\s*(\\d+)",
      "priority": 2,
      "description": "СЧЕТ-ДОГОВОР с номером",
      "active": true
    },
    {
      "pattern": "№\\s*(0+\\d+)\\s*от",
      "priority": 2,
      "description": "Номер с нулями в начале",
      "active": true
    },
    {
      "pattern": "СЧЁТ.*?№\\s*(\\d+)",
      "priority": 3,
      "description": "СЧЁТ с номером",
      "active": true
    },
    {
      "pattern": "СЧЕТ.*?№\\s*(\\d+)",
      "priority": 3,
      "description": "СЧЕТ с номером",
      "active": true
    },
    {
      "pattern": "№\\s*(\\d+)\\s*от\\s*\\d",
      "priority": 3,
      "description": "№ НОМЕР от ДАТА",
      "active": true
    },
    {
      "pattern": "С[ЧТ]\\s+(\\d+)\\s+от",
      "priority": 4,
      "description": "OCR искажения СЧ->СТ",
      "active": true
    },
    {
      "pattern": "№\\s*(\\d{2,10})\\s*от",
      "priority": 4,
      "description": "Универсальный номер в начале",
      "active": true
    }
  ],
  "total_amount_patterns": [
    {
      "pattern": "(?:всего\\s*к\\s*оплате|ВСЕГО\\s*К\\s*ОПЛАТЕ)[\\s:]*([0-9]{1,3}(?:[\\s,\\.][0-9]{3})*[\\.,]\\d{2})",
      "priority": 1,
      "description": "Всего к оплате",
      "active": true
    },
    {
      "pattern": "(?:Итого|ИТОГО|Total)[\\s:]*([0-9]{1,3}(?:[\\s,\\.][0-9]{3})*[\\.,]\\d{2})",
      "priority": 1,
      "description": "Итого с двоеточием",
      "active": true
    },
    {
      "pattern": "(?:к\\s*доплате|К\\s*ДОПЛАТЕ)[\\s:]*([0-9]{1,3}(?:[\\s,\\.][0-9]{3})*[\\.,]\\d{2})",
      "priority": 1,
      "description": "К доплате",
      "active": true
    },
    {
      "pattern": "(?:Всего|ВСЕГО)[\\s:]*([0-9]{1,3}(?:[\\s,\\.][0-9]{3})*[\\.,]\\d{2})",
      "priority": 1,
      "description": "Общий итог",
      "active": true
    },
    {
      "pattern": "(?:общая\\s*стоимость|ОБЩАЯ\\s*СТОИМОСТЬ)[\\s:]*([0-9]{1,3}(?:[\\s,\\.][0-9]{3})*[\\.,]\\d{2})",
      "priority": 1,
      "description": "Общая стоимость",
      "active": true
    },
    {
      "pattern": "([0-9]{4,}[\\.,]\\d{2})\\s*руб",
      "priority": 2,
      "description": "Суммы с 'руб' (только большие)",
      "active": true
    },
    {
      "pattern": "([0-9]{6,}[\\.,]\\d{2})",
      "priority": 3,
      "description": "Очень большие числа (6+ цифр)",
      "active": true
    }
  ],
  "contractor_name_patterns": [
    {
      "pattern": "Поставщик:\\s*([^\\n\\r,]+?)(?:,|\\s*ИНН|\\s*КПП|\\s*Адрес:|\\s*тел\\.|\\s*$)",
      "priority": 1,
      "description": "Поставщик: НАЗВАНИЕ",
      "active": true
    },
    {
      "pattern": "(?:^|[\\s\\n])(?:\\d+\\/\\d+\\s+)?ООО\\s*\"?Группа компаний\\s*\"?([^\"\\n\\r]*?)\"?(?:\\s|$)",
      "priority": 1,
      "description": "ООО 'Группа компаний'",
      "active": true
    },
    {
      "pattern": "Получатель[\\s\\S]*?(?:ООО|ИП|ЗАО|ПАО|АО)\\s*\"?([^\"\\n\\r]+?)\"?\\s*(?:Сч\\.|ИНН|\\s)",
      "priority": 1,
      "description": "Получатель в банковских реквизитах",
      "active": true
    },
    {
      "pattern": "(ООО|ИП|ЗАО|ПАО|АО)\\s*\"?([^\"\\n\\r,]+?)(?:\",|\\s*ИНН|\\s*КПП|\\s*Сч\\.|\\s|$)",
      "priority": 2,
      "description": "Первая найденная компания",
      "active": true
    }
  ],
  "inn_patterns": [
    {
      "pattern": "Поставщик[\\s\\S]*?ИНН\\s*(\\d{10,12})",
      "priority": 1,
      "description": "ИНН в секции поставщика",
      "active": true
    },
    {
      "pattern": "(\\d{10,12})\\/\\d+\\s+ООО\\s*\"?Группа компаний",
      "priority": 1,
      "description": "ИНН/КПП ПЕРЕД Группа компаний",
      "active": true
    },
    {
      "pattern": "ООО\\s*\"?Группа компаний[\\s\\S]*?ИНН[\\s:]*(\\d{10,12})",
      "priority": 1,
      "description": "ИНН ПОСЛЕ Группа компаний",
      "active": true
    },
    {
      "pattern": "ИНН[\\s:]*(\\d{10,12})",
      "priority": 2,
      "description": "Любой ИНН (исключая заказчика)",
      "active": true
    },
    {
      "pattern": "Получатель[\\s\\S]*?ИНН[\\s:]*(\\d{10,12})",
      "priority": 2,
      "description": "ИНН в банковских реквизитах",
      "active": true
    }
  ],
  "settings": {
    "min_invoice_amount": 100,
    "exclude_inn_from_customer": true,
    "debug_mode": false,
    "russian_months": {
      "января": "01",
      "февраля": "02",
      "марта": "03",
      "апреля": "04",
      "мая": "05",
      "июня": "06",
      "июля": "07",
      "августа": "08",
      "сентября": "09",
      "октября": "10",
      "ноября": "11",
      "декабря": "12"
    }
  }
}